<%# locals: (student:, date:, origin: nil) %>
<div class="bg-white rounded-t-2xl p-6 w-full max-w-lg mx-auto">
  <div class="flex items-center justify-between mb-4">
    <h2 id="quick-note-modal-title" class="text-lg font-semibold text-gray-800">Quick Note</h2>
    <button type="button"
            data-action="click->quick-note-fab#close"
            class="text-gray-400 hover:text-gray-600 p-2 -mr-2 min-w-[44px] min-h-[44px] flex items-center justify-center">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <%= form_with url: student_quick_notes_path(student), method: :post, scope: :quick_note, class: "space-y-4", data: { action: "turbo:submit-end->quick-note-fab#close" }, multipart: true do |form| %>
    <%= form.hidden_field :date, value: date %>
    <%= hidden_field_tag :origin, origin if origin.present? %>

    <div>
      <%= form.text_area :content, rows: 4,
          placeholder: "Field trip today, shortened lessons, general observations...",
          autofocus: true,
          class: "w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-coral focus:border-coral resize-none" %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        <span class="flex items-center gap-1">üéôÔ∏è Voice note <span class="text-gray-400 font-normal">(optional)</span></span>
      </label>
      <%= form.file_field :audio,
          accept: "audio/*",
          capture: "microphone",
          class: "w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-coral focus:border-coral file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-coral file:text-white file:cursor-pointer text-sm" %>
    </div>

    <div class="flex gap-3">
      <%= form.submit "Save Note",
          class: "flex-1 bg-coral text-white px-6 py-3 rounded-lg font-medium hover:bg-coral/90 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",
          data: { turbo_submits_with: "Saving..." } %>
      <button type="button"
              data-action="click->quick-note-fab#close"
              class="px-6 py-3 text-gray-600 hover:text-gray-800 font-medium min-h-[44px]">
        Cancel
      </button>
    </div>
  <% end %>
</div>
