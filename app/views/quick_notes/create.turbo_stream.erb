<%# Update daily focus section (always rendered on pages with FAB/inline form) %>
<%= turbo_stream.prepend "quick_notes" do %>
  <%= render partial: "daily/quick_note_card", locals: { recording: @recording, quick_note: @quick_note } %>
<% end %>

<%= turbo_stream.update "new_quick_note_form" do %>
  <%= render "quick_notes/inline_form", student: @student, date: @date %>
<% end %>

<%# Update /notes timeline only when on that page (avoid target-not-found warnings) %>
<% if request.referrer&.include?("/notes") %>
  <%= turbo_stream.prepend "notes_timeline" do %>
    <%= render partial: "recordings/quick_note", locals: { recording: @recording, recordable: @quick_note } %>
  <% end %>

  <%= turbo_stream.remove "notes_empty_state" %>
<% end %>
