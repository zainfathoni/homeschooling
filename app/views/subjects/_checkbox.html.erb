<%
  completed = subject.completions.any? { |c| c.date == date }
%>
<%= turbo_frame_tag dom_id(subject, :checkbox) do %>
  <%= button_to toggle_completion_path(subject_id: subject.id, date: date),
      method: :post,
      class: "w-full bg-white rounded-xl p-4 shadow-sm flex items-center gap-4 cursor-pointer hover:bg-gray-50 transition-colors text-left",
      data: { turbo_frame: dom_id(subject, :checkbox) } do %>
    <span class="w-11 h-11 rounded-lg border-2 flex items-center justify-center shrink-0 transition-all <%= completed ? 'bg-coral border-coral' : 'border-gray-300' %>" aria-hidden="true">
      <% if completed %>
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
        </svg>
      <% end %>
    </span>
    <span class="sr-only"><%= completed ? "Completed" : "Mark complete" %>:</span>
    <span class="text-lg text-gray-800 <%= 'line-through text-gray-400' if completed %>">
      <%= subject.name %>
    </span>
  <% end %>
<% end %>
