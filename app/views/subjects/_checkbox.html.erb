<%
  completed = subject.completions.any? { |c| c.date == date }
%>
<%= turbo_frame_tag dom_id(subject, :checkbox) do %>
  <div class="bg-white rounded-xl p-4 shadow-sm flex items-center gap-4">
    <%= button_to toggle_completion_path(subject_id: subject.id, date: date),
        method: :post,
        class: "w-11 h-11 rounded-lg border-2 flex items-center justify-center transition-all #{completed ? 'bg-coral border-coral' : 'border-gray-300 hover:border-coral'}",
        data: { turbo_frame: dom_id(subject, :checkbox) } do %>
      <% if completed %>
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
        </svg>
      <% end %>
    <% end %>
    <span class="text-lg text-gray-800 <%= 'line-through text-gray-400' if completed %>">
      <%= subject.name %>
    </span>
  </div>
<% end %>
