<%# Update the checkbox (existing Today view) %>
<%= turbo_stream.replace dom_id(@subject, :checkbox) do %>
  <%= render "subjects/checkbox", subject: @subject, date: @date %>
<% end %>

<%# Update the completion circle (weekly grid) %>
<%= turbo_stream.replace dom_id(@subject, "circle_#{@date.to_s}") do %>
  <%= render "today/completion_circle",
             subject: @subject,
             date: @date,
             completed: @completed,
             has_narration: @has_narration,
             pick1_option_name: @pick1_option_name,
             is_today: @is_today %>
<% end %>

<%# Update the progress bar (weekly grid) %>
<%= turbo_stream.replace "progress_bar" do %>
  <%= render "today/progress_bar",
             completed: @total_completed,
             total: @total_possible %>
<% end %>

<%# Update the task card or pick1 selector (Daily Focus view) %>
<%= turbo_stream.replace dom_id(@subject, "task_#{@date}") do %>
  <% if @subject.pick1? %>
    <%= render "daily/pick1_selector",
               subject: @subject,
               date: @date,
               selected_option_id: @selected_option_id,
               has_narration: @has_narration %>
  <% else %>
    <%= render "daily/task_card",
               subject: @subject,
               date: @date,
               completed: @completed,
               has_narration: @has_narration %>
  <% end %>
<% end %>

<%# Update the progress ring (Daily Focus view) %>
<%= turbo_stream.replace "progress_ring" do %>
  <%= render "daily/progress_ring",
             completed: @daily_completed,
             total: @daily_total %>
<% end %>

<%# Show narration reminder modal for subjects with narration_required %>
<% if @show_narration_reminder %>
<%= turbo_stream.append "modals" do %>
  <%= render "completions/narration_reminder", subject: @subject, date: @date %>
<% end %>
<% end %>
