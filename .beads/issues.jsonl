{"id":"hs-275","title":"Fix flaky weekly-grid.spec.ts tests","description":"Several tests in weekly-grid.spec.ts are failing intermittently:\n\n## Failing tests\n- 'displays subjects from seed data' - looking for text 'Math', 'Handwriting', 'Reading'\n- 'can toggle subject completion for a day' - checkbox toggle assertion\n- 'login page loads and shows content' (smoke.spec.ts) - title assertion timeout\n\n## Likely causes\n- Selectors may need adjustment for actual DOM structure\n- Timing/race conditions with page load\n- noscript project may need different handling for interactive tests\n\n## Fix approach\n- Run tests with --debug to inspect actual DOM\n- Adjust selectors to match rendered output\n- Add proper waits for dynamic content","status":"closed","priority":2,"issue_type":"bug","owner":"me@zainf.dev","created_at":"2026-01-20T22:20:39.900663+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:34:19.777982+07:00","closed_at":"2026-01-20T22:34:19.777982+07:00","close_reason":"Fixed flaky E2E tests: (1) Added .locator('visible=true') for mobile/desktop CSS-hidden elements, (2) Removed page title assertion from login test (no meta export), (3) Improved toggle test to handle pre-checked state, (4) Fixed navigation test to wait for specific URL, (5) Added noscript skips for interactive tests","dependencies":[{"issue_id":"hs-275","depends_on_id":"hs-e2e.7","type":"blocks","created_at":"2026-01-20T22:20:45.147387+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci","title":"CI/CD Pipeline Epic","description":"## Summary\n\nCreate a CI pipeline using GitHub Actions with quality gates: linting, type checking, build verification, and E2E tests. Deployment automation deferred to future epic.\n\n## Current State\n\n- **No CI/CD exists** - .github/workflows/ directory doesn't exist\n- **Testing ready** - Playwright E2E configured with 5 browser profiles\n- **Build ready** - npm run build and npm run typecheck available\n- **No linting** - ESLint not yet configured\n\n## CI Workflow Structure (ci.yml)\n\n```yaml\nname: CI\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  cache-npm:          # Foundation job - caches npm packages\n  lint:               # Depends on cache-npm\n  typecheck:          # Depends on cache-npm\n  build:              # Depends on cache-npm\n  e2e-test:           # Depends on cache-npm, includes Playwright cache\n```\n\n## Key Patterns\n\n1. **Parallel quality gates** - lint, typecheck, build run in parallel after cache\n2. **Dual caching** - NPM cache + separate Playwright cache\n3. **Smart Playwright install** - Only install deps if browsers cached\n4. **Fork safety** - Skip secret-dependent jobs in forks\n5. **CI detection** - CI: true environment variable for test behavior\n\n## Required GitHub Secrets (for E2E)\n\n| Secret | Purpose |\n|--------|---------|\n| SESSION_SECRET | App session encryption |\n| MAGIC_LINK_SECRET | Email link encryption |\n\n## Verification Plan\n\n1. Create workflow file in .github/workflows/ci.yml\n2. Push to feature branch\n3. Open PR - verify CI triggers automatically\n4. Check all jobs pass: cache → lint, typecheck, build, e2e (parallel)\n5. Fix any issues, iterate until green\n6. Merge to main - verify CI runs on push","status":"open","priority":1,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T22:47:00.947142+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:47:00.947142+07:00"}
{"id":"hs-ci.1","title":"Create ci.yml workflow","description":"Create the base GitHub Actions workflow file at .github/workflows/ci.yml.\n\n## Triggers\n- push to main branch\n- pull_request to main branch\n\n## Runner\n- Ubuntu latest\n\n## Job Structure\n```yaml\njobs:\n  cache-npm:          # Foundation job - caches npm packages\n  lint:               # Depends on cache-npm\n  typecheck:          # Depends on cache-npm  \n  build:              # Depends on cache-npm\n  e2e-test:           # Depends on cache-npm, includes Playwright cache\n```\n\n## Key Patterns\n- Use actions/checkout@v4\n- Use actions/setup-node@v4 with Node 20\n- Set CI: true environment variable\n- Proper job dependencies with needs: keyword","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:49:47.532914+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:49:47.532914+07:00","dependencies":[{"issue_id":"hs-ci.1","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:49:47.534655+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci.2","title":"NPM cache job","description":"Implement the cache-npm job that caches node_modules.\n\n## Purpose\nFoundation job that all other jobs depend on. Ensures npm dependencies are cached and restored efficiently across parallel jobs.\n\n## Implementation\n- Use actions/setup-node@v4 with cache: 'npm'\n- Cache is keyed to package-lock.json hash automatically\n- Run npm ci (clean install for CI environments)\n\n## Cache Strategy\n- actions/setup-node handles caching automatically when cache: 'npm' is set\n- Cache key derived from package-lock.json\n- All downstream jobs can restore this cache\n\n## Job Output\nOther jobs use needs: [cache-npm] to wait for this job and benefit from the cached dependencies.","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:49:51.505874+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:49:51.505874+07:00","dependencies":[{"issue_id":"hs-ci.2","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:49:51.508538+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci.3","title":"TypeCheck job","description":"Add typecheck job that runs npm run typecheck.\n\n## Dependencies\n- needs: [cache-npm]\n\n## Steps\n1. Checkout code\n2. Setup Node with npm cache\n3. Run npm ci\n4. Run npm run typecheck\n\n## What it runs\nThe typecheck script executes: react-router typegen \u0026\u0026 tsc\n\nThis generates route types and then runs the TypeScript compiler in check mode to verify all types are correct.\n\n## Failure Behavior\nJob fails if any type errors are found, blocking PR merge.","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:49:53.451752+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:49:53.451752+07:00","dependencies":[{"issue_id":"hs-ci.3","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:49:53.454715+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci.4","title":"Build job","description":"Add build job that runs npm run build.\n\n## Purpose\nVerify the production build works correctly before merging.\n\n## Dependencies\n- needs: [cache-npm]\n\n## Steps\n1. Checkout code\n2. Setup Node with npm cache\n3. Run npm ci\n4. Run npm run build\n\n## What it runs\nThe build script executes: react-router build\n\nThis creates the production bundle with all optimizations.\n\n## Failure Behavior\nJob fails if build errors occur, blocking PR merge.","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:49:56.668112+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:49:56.668112+07:00","dependencies":[{"issue_id":"hs-ci.4","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:49:56.672673+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci.5","title":"E2E test job","description":"Add e2e-test job that runs Playwright tests.\n\n## Dependencies\n- needs: [cache-npm]\n\n## Dual Caching Strategy\n1. NPM cache (from cache-npm job)\n2. Playwright browser cache (separate, keyed to Playwright version)\n\n## Steps\n1. Checkout code\n2. Setup Node with npm cache\n3. Run npm ci\n4. Cache Playwright browsers (actions/cache)\n5. Install Playwright browsers (only if cache miss)\n6. Run npx playwright test\n\n## Required Secrets\n- SESSION_SECRET: App session encryption\n- MAGIC_LINK_SECRET: Email link encryption\n\n## Environment Variables\n```yaml\nenv:\n  CI: true\n  SESSION_SECRET: \\${{ secrets.SESSION_SECRET }}\n  MAGIC_LINK_SECRET: \\${{ secrets.MAGIC_LINK_SECRET }}\n```\n\n## Playwright Cache Key\nCache key should include:\n- OS (runner.os)\n- Playwright version (from package-lock.json or npx playwright --version)\n\n## Test Artifacts\nUpload test results and traces on failure using actions/upload-artifact.","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:49:58.607437+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:49:58.607437+07:00","dependencies":[{"issue_id":"hs-ci.5","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:49:58.611984+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-ci.6","title":"Install ESLint dependencies","description":"Add ESLint and related packages to devDependencies.\n\n## Packages to Install\n```bash\nnpm install -D eslint @eslint/js typescript-eslint eslint-plugin-react eslint-plugin-react-hooks globals\n```\n\n## Package Purposes\n- **eslint**: Core linting engine\n- **@eslint/js**: ESLint's built-in JavaScript rules for flat config\n- **typescript-eslint**: TypeScript parser and rules\n- **eslint-plugin-react**: React-specific linting rules\n- **eslint-plugin-react-hooks**: Rules of Hooks enforcement\n- **globals**: Global variable definitions (browser, node, etc.)\n\n## Version Strategy\nUse latest stable versions. The flat config format requires ESLint 8.21+ (preferably 9.x).","status":"open","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:50:21.844633+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:50:21.844633+07:00","dependencies":[{"issue_id":"hs-ci.6","depends_on_id":"hs-ci","type":"parent-child","created_at":"2026-01-20T22:50:21.84768+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-daily","title":"Daily Focus View - Task Cards \u0026 Progress","description":"Implement daily focus view with task cards and progress tracking.\n\n## Key Deliverables\n- DailyFocus component with progress ring\n- Task cards with completion toggle\n- Requires narration badges\n- Link to add narration\n\n## Acceptance Criteria\n- Progress ring updates as tasks complete\n- Task cards show subject and completion status\n- Narration badges display correctly\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":2,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:48:57.177069+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:20:04.776964+07:00","closed_at":"2026-01-20T19:20:04.776964+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-daily","depends_on_id":"hs-weekly","type":"blocks","created_at":"2026-01-20T15:49:19.225165+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-daily.1","title":"DailyFocus component with progress ring","description":"Main daily view with visual progress.\n\n## Components\n- app/components/schedule/DailyFocus.tsx\n- app/components/schedule/ProgressRing.tsx\n\n## Features\n- Circular progress showing % complete\n- Updates as tasks marked done\n- Shows day name and date\n\n## Acceptance Criteria\n- Progress ring animates\n- Percentage accurate","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:52:32.034999+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:04:08.576505+07:00","closed_at":"2026-01-20T19:04:08.576505+07:00","close_reason":"Created ProgressRing and DailyFocus components with animated progress ring, task list with completion toggles, and narration badges","dependencies":[{"issue_id":"hs-daily.1","depends_on_id":"hs-daily","type":"parent-child","created_at":"2026-01-20T15:52:32.036105+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-daily.2","title":"TaskCard with completion toggle","description":"Individual task card in daily view.\n\n## Component\n- app/components/schedule/TaskCard.tsx\n\n## Features\n- Subject name and icon\n- Tap to toggle complete\n- Visual feedback on completion\n\n## Acceptance Criteria\n- Toggles work\n- State persists","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:54:19.362656+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:05:55.975025+07:00","closed_at":"2026-01-20T19:05:55.975025+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-daily.2","depends_on_id":"hs-daily","type":"parent-child","created_at":"2026-01-20T15:54:19.363773+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-daily.3","title":"Narration badges and links","description":"Show narration status on tasks.\n\n## Features\n- Badge if subject requires narration\n- Badge if narration already added\n- Link to add/view narration\n\n## Acceptance Criteria\n- Badges display correctly\n- Links navigate properly","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:54:22.778779+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:10:42.794747+07:00","closed_at":"2026-01-20T19:10:42.794747+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-daily.3","depends_on_id":"hs-daily","type":"parent-child","created_at":"2026-01-20T15:54:22.779658+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-deploy","title":"Deployment - Kamal to VPS","description":"Set up deployment using Kamal to VPS.\n\n## Key Deliverables\n- Dockerfile\n- config/deploy.yml\n- Volume mounts for SQLite + uploads\n- Mailgun secrets\n\n## Acceptance Criteria\n- kamal deploy succeeds\n- Database persists across deploys\n- File uploads persist\n- Magic link email works\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":3,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:49:04.655619+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:56:35.921555+07:00","closed_at":"2026-01-20T19:56:35.921555+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-deploy","depends_on_id":"hs-narrations","type":"blocks","created_at":"2026-01-20T15:49:20.222638+07:00","created_by":"Zain Fathoni"},{"issue_id":"hs-deploy","depends_on_id":"hs-permissions","type":"blocks","created_at":"2026-01-20T15:49:20.353381+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-deploy.1","title":"Dockerfile for production build","description":"Multi-stage Docker build.\n\n## Files\n- Dockerfile\n- .dockerignore\n\n## Features\n- Node.js 20 base\n- Multi-stage build\n- Production optimized\n\n## Acceptance Criteria\n- docker build succeeds\n- Container runs app","status":"closed","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:41.847023+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:49:23.803044+07:00","closed_at":"2026-01-20T19:49:23.803044+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-deploy.1","depends_on_id":"hs-deploy","type":"parent-child","created_at":"2026-01-20T15:55:41.848008+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-deploy.2","title":"Kamal deployment configuration","description":"Configure Kamal for VPS deployment.\n\n## Files\n- config/deploy.yml\n\n## Configuration\n- Server: 103.235.75.227\n- Volume: SQLite database\n- Volume: uploads directory\n- Secrets: Mailgun API key\n\n## Acceptance Criteria\n- kamal setup succeeds\n- kamal deploy succeeds","status":"closed","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:44.218463+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:51:45.755986+07:00","closed_at":"2026-01-20T19:51:45.755986+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-deploy.2","depends_on_id":"hs-deploy","type":"parent-child","created_at":"2026-01-20T15:55:44.219385+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-deploy.3","title":"Volume mounts for persistence","description":"Ensure data persists across deploys.\n\n## Volumes\n- /data/homeschool/db/ → SQLite database\n- /data/homeschool/uploads/ → narration files\n\n## Acceptance Criteria\n- Database survives deploy\n- Uploads survive deploy","status":"closed","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:46.555008+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:54:02.352741+07:00","closed_at":"2026-01-20T19:54:02.352741+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-deploy.3","depends_on_id":"hs-deploy","type":"parent-child","created_at":"2026-01-20T15:55:46.555922+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-deploy.4","title":"Mailgun integration for magic links","description":"Send magic link emails in production.\n\n## Configuration\n- Mailgun API key as secret\n- Sender domain setup\n\n## Acceptance Criteria\n- Magic link emails send\n- Links work correctly","status":"closed","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:48.690872+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:56:27.978096+07:00","closed_at":"2026-01-20T19:56:27.978096+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-deploy.4","depends_on_id":"hs-deploy","type":"parent-child","created_at":"2026-01-20T15:55:48.691724+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e","title":"E2E Test Infrastructure","description":"## Overview\n\nSet up Playwright-based end-to-end testing infrastructure for the Homeschool Planner app, modeled after the kelas.rumahberbagi.com project.\n\n## Goals\n\n1. Catch page rendering failures before deployment\n2. Test user flows across mobile/tablet breakpoints\n3. Enable authentication state fixtures for testing different user scenarios\n\n## Implementation Plan\n\n### Phase 1: Core Infrastructure\n- [ ] Install Playwright and dependencies (`@playwright/test`, `start-server-and-test`)\n- [ ] Create `playwright.config.ts` with device profiles (mobile + tablet breakpoints)\n- [ ] Create `e2e/` directory structure:\n  - `e2e/base-test.ts` - Extended test fixture with custom options\n  - `e2e/fixtures/` - Auth states, test data\n  - `e2e/fixtures/auth/` - Storage state files for different user states\n\n### Phase 2: Global Setup\n- [ ] Create `playwright-global-setup.ts` for pre-test authentication\n- [ ] Implement test database seeding (`test.db`) before e2e runs\n- [ ] Add npm scripts:\n  - `test:e2e` - Run Playwright tests\n  - `prestart:e2e` - Reset test database  \n  - `start:e2e` - Start app with test db\n  - `test:e2e:run` - Full e2e with server startup\n\n### Phase 3: Initial Test Specs\n- [ ] `e2e/smoke.spec.ts` - Public page availability checks\n- [ ] `e2e/weekly-grid.spec.ts` - Weekly grid loads, subject checkboxes work\n- [ ] `e2e/subject-completion.spec.ts` - Toggle completion, persistence\n\n### Phase 4: Device Coverage\nConfigure projects for:\n- Mobile (iPhone 11/Pixel 4)\n- Tablet (iPad landscape)\n- Desktop (Chrome, Firefox, WebKit)\n- NoScript mode (progressive enhancement)\n\n## Technical Details\n\n### Test Database Strategy\n```bash\n# Reset + seed before e2e\nDATABASE_URL=file:./test.db prisma migrate reset --force\n# Run app with isolated test db\nRUNNING_E2E=true DATABASE_URL=file:./test.db react-router dev\n```\n\n### Package.json Scripts (from reference project)\n```json\n\"prestart:e2e\": \"DATABASE_URL=file:./test.db prisma migrate reset --force\",\n\"start:e2e\": \"cross-env RUNNING_E2E=true DATABASE_URL=file:./test.db react-router dev\",\n\"test:e2e\": \"playwright test\",\n\"test:e2e:run\": \"cross-env RUNNING_E2E=true DATABASE_URL=file:./test.db start-server-and-test start:e2e http-get://localhost:3000/ test:e2e\"\n```\n\n### Dependencies to Add\n```json\n\"@playwright/test\": \"^1.57.0\",\n\"start-server-and-test\": \"^1.14.0\",\n\"cross-env\": \"^7.0.3\"\n```\n\n## Sub-Tasks\n\nCreate child issues for each phase after epic approval.\n\n## Success Criteria\n\n- `npm run test:e2e:run` passes on CI\n- Coverage for critical user flows (weekly grid, subject completion)\n- Tests run against mobile + tablet breakpoints\n- Test database isolation prevents data pollution","status":"open","priority":1,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T21:52:05.748952+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:52:05.748952+07:00"}
{"id":"hs-e2e.1","title":"Install Playwright and dependencies","description":"Install core e2e testing dependencies:\n\n```bash\nnpm install -D @playwright/test start-server-and-test cross-env\nnpx playwright install\n```\n\n## Acceptance Criteria\n- `@playwright/test` in devDependencies\n- `start-server-and-test` for server startup coordination\n- `cross-env` for cross-platform env vars\n- Playwright browsers installed","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.10396+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:55:17.564198+07:00","closed_at":"2026-01-20T21:55:17.564198+07:00","close_reason":"Installed @playwright/test@1.57.0, start-server-and-test@1.14.0, cross-env@7.0.3 as devDependencies and ran playwright install for browsers","dependencies":[{"issue_id":"hs-e2e.1","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.105659+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.10","title":"Add student auth fixture to setup-auth-fixtures.ts","description":"Create student auth fixture for permission testing:\n- Enhance e2e/setup-auth-fixtures.ts to generate student session\n- Create e2e/fixtures/auth/student.local.json\n- Enable permission boundary testing","status":"open","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:18.934377+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:18.934377+07:00","dependencies":[{"issue_id":"hs-e2e.10","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:18.935241+07:00","created_by":"Zain Fathoni"},{"issue_id":"hs-e2e.10","depends_on_id":"hs-e2e.9","type":"blocks","created_at":"2026-01-20T22:35:49.295365+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.11","title":"Create auth.spec.ts for login/logout flows","description":"Test authentication flows:\n1. Login page displays email form and send button\n2. Magic link request shows success message (dev mode)\n3. Invalid email shows validation error\n4. Logout destroys session and redirects\n5. Protected routes redirect unauthenticated users\n6. redirectTo param preserves intended destination","status":"in_progress","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:21.056207+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:47:01.225787+07:00","dependencies":[{"issue_id":"hs-e2e.11","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:21.058932+07:00","created_by":"Zain Fathoni"},{"issue_id":"hs-e2e.11","depends_on_id":"hs-e2e.9","type":"blocks","created_at":"2026-01-20T22:35:49.349292+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.12","title":"Create narrations-text.spec.ts for text narration flow","description":"Test text narration CRUD:\n1. Navigate to new narration page from weekly grid\n2. Text tab is default with textarea visible\n3. Create text narration and verify save\n4. Submit disabled when content empty\n5. View created narration with correct content\n6. Delete narration and verify removal","status":"open","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:28.995468+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:28.995468+07:00","dependencies":[{"issue_id":"hs-e2e.12","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:28.99913+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.13","title":"Create narrations-media.spec.ts for voice/photo flows","description":"Test media narration flows:\n1. Voice tab shows recording interface\n2. Photo tab shows upload interface\n3. Photo upload flow with file input\n4. Voice recording requires mocking MediaRecorder\nNote: Voice recording tests may need mocking; photo upload can use file input.","status":"open","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:30.805887+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:30.805887+07:00","dependencies":[{"issue_id":"hs-e2e.13","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:30.80799+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.14","title":"Create narrations-list.spec.ts for narration browsing","description":"Test narration browsing:\n1. Narrations index shows subjects grouped\n2. Subject-specific page filters correctly\n3. Narration cards display type badges\n4. Navigation links work correctly","status":"open","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:31.940472+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:31.940472+07:00","dependencies":[{"issue_id":"hs-e2e.14","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:31.944262+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.15","title":"Create week-settings.spec.ts for school days config","description":"Test week settings:\n1. Parent can access settings page\n2. Student gets 403 Forbidden (permission test)\n3. Toggle school days on/off\n4. Changes persist after refresh\n5. Default days are Mon-Fri","status":"open","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:33.933411+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:33.933411+07:00","dependencies":[{"issue_id":"hs-e2e.15","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:33.936585+07:00","created_by":"Zain Fathoni"},{"issue_id":"hs-e2e.15","depends_on_id":"hs-e2e.10","type":"blocks","created_at":"2026-01-20T22:35:49.402845+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.16","title":"Create student-switcher.spec.ts for multi-student flow","description":"Test student switcher:\n1. Parent sees student dropdown\n2. Switch student updates displayed data\n3. Selection persists across navigation\n4. Student user sees no switcher","status":"open","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:35.928801+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:35.928801+07:00","dependencies":[{"issue_id":"hs-e2e.16","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:35.931242+07:00","created_by":"Zain Fathoni"},{"issue_id":"hs-e2e.16","depends_on_id":"hs-e2e.10","type":"blocks","created_at":"2026-01-20T22:35:49.457018+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.17","title":"Create daily-focus.spec.ts for tablet duet view","description":"Test duet view on tablet:\n1. Tablet viewport shows duet layout\n2. Day selection updates daily focus panel\n3. Progress ring updates with completions\n4. Task cards show correct states\n5. Mobile hides duet view\nViewport: Test at 1024x768 (tablet) vs 375x667 (mobile)","status":"open","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:38.030023+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:38.030023+07:00","dependencies":[{"issue_id":"hs-e2e.17","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:38.032658+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.18","title":"Create responsive-layout.spec.ts for breakpoint testing","description":"Test responsive breakpoints:\n1. Mobile (\u003c 768px): bottom nav, single column\n2. Tablet (\u003e= 768px): side nav, duet view\n3. Touch targets \u003e= 44px\n4. Design tokens applied (lavender bg, coral accent)","status":"open","priority":3,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:40.308846+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:35:40.308846+07:00","dependencies":[{"issue_id":"hs-e2e.18","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:40.31114+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.2","title":"Create playwright.config.ts with device profiles","description":"Create Playwright config with device profiles matching app breakpoints:\n\n- Mobile: Pixel 4, iPhone 11\n- Tablet: iPad (landscape for Duet view)\n- Desktop: Chrome, Firefox, WebKit\n- NoScript mode for progressive enhancement\n\n## Key Config\n- testDir: './e2e'\n- globalSetup: require.resolve('./playwright-global-setup')\n- baseURL: 'http://localhost:3000'\n\n## Acceptance Criteria\n- Config matches responsive breakpoints (\u003c768px mobile, ≥768px tablet)\n- Trace on first retry enabled\n- CI-aware retries","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.220976+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:57:01.664+07:00","closed_at":"2026-01-20T21:57:01.664+07:00","close_reason":"Created playwright.config.ts with Pixel 4, iPhone 11, Firefox, Safari, and noscript device profiles","dependencies":[{"issue_id":"hs-e2e.2","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.222463+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.3","title":"Create e2e directory structure and base-test.ts","description":"Set up e2e folder structure:\n\ne2e/\n├── base-test.ts       # Extended test fixture\n├── fixtures/\n│   └── auth/          # Storage state files\n\n## base-test.ts\nExtended Playwright test with custom fixtures (noscript option, etc.)\n\n## Acceptance Criteria\n- Directory structure created\n- base-test.ts exports extended test and expect","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.333378+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:57:34.319602+07:00","closed_at":"2026-01-20T21:57:34.319602+07:00","close_reason":"Created e2e/ directory with base-test.ts (Fixtures interface with noscript option) and fixtures/ subdirectory","dependencies":[{"issue_id":"hs-e2e.3","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.334302+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.4","title":"Create playwright-global-setup.ts","description":"Global setup for pre-test authentication and fixture generation.\n\n## Implementation\n- Launch browser and perform login flows\n- Save storage state to e2e/fixtures/auth/*.json\n- Handle magic link auth if needed\n\n## Acceptance Criteria\n- Auth states saved before tests run\n- Reusable across test specs","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.471592+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:58:03.65649+07:00","closed_at":"2026-01-20T21:58:03.65649+07:00","close_reason":"Created playwright-global-setup.ts that verifies app is running before tests","dependencies":[{"issue_id":"hs-e2e.4","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.472652+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.5","title":"Add npm scripts for e2e testing","description":"Add e2e scripts to package.json:\n\n```json\n\"prestart:e2e\": \"DATABASE_URL=file:./test.db prisma migrate reset --force\",\n\"start:e2e\": \"cross-env RUNNING_E2E=true DATABASE_URL=file:./test.db react-router dev\",\n\"test:e2e\": \"playwright test\",\n\"test:e2e:run\": \"cross-env RUNNING_E2E=true DATABASE_URL=file:./test.db start-server-and-test start:e2e http-get://localhost:3000/ test:e2e\"\n```\n\n## Acceptance Criteria\n- Test database isolation (test.db)\n- Server auto-start with start-server-and-test\n- RUNNING_E2E env var available","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.600732+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T21:58:36.691931+07:00","closed_at":"2026-01-20T21:58:36.691931+07:00","close_reason":"Added test:e2e, test:e2e:dev, and test:e2e:run npm scripts","dependencies":[{"issue_id":"hs-e2e.5","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.602008+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.6","title":"Create smoke.spec.ts for public pages","description":"Basic smoke tests for public page availability:\n\n## Tests\n- Homepage loads\n- Returns 200 for main routes\n- Basic content visible\n\n## Acceptance Criteria\n- No auth required\n- Can run against any environment\n- Fast feedback on deployment issues","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.711989+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:00:49.264952+07:00","closed_at":"2026-01-20T22:00:49.264952+07:00","close_reason":"Created smoke.spec.ts with 3 tests: login page content, email input, and 200 status check","dependencies":[{"issue_id":"hs-e2e.6","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.713213+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.7","title":"Create weekly-grid.spec.ts","description":"E2E tests for the weekly grid view:\n\n## Tests\n- Weekly grid loads with subjects\n- Subject checkboxes are interactive\n- Mobile vs tablet layout differences\n\n## Acceptance Criteria\n- Tests pass on mobile and tablet breakpoints\n- Covers fixed, scheduled, pick1 subject types","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.84232+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:20:53.280713+07:00","closed_at":"2026-01-20T22:20:53.280713+07:00","close_reason":"Created weekly-grid.spec.ts with tests for page load, subject types (fixed, pick1), completion toggle, navigation, and responsive layouts. Auth fixture generation added via setup-auth-fixtures.ts. Some tests are flaky - tracked in hs-275.","dependencies":[{"issue_id":"hs-e2e.7","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.843738+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.8","title":"Create subject-completion.spec.ts","description":"E2E tests for subject completion flow:\n\n## Tests\n- Toggle completion checkbox\n- Verify persistence after page reload\n- Test completion across different days\n\n## Acceptance Criteria\n- Completion state persists\n- Works for all subject types","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T21:53:23.964949+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:44:36.564992+07:00","closed_at":"2026-01-20T22:44:36.564992+07:00","close_reason":"Created subject-completion.spec.ts with 6 tests covering toggle, persistence, multiple days, and handwriting subject","dependencies":[{"issue_id":"hs-e2e.8","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T21:53:23.96595+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-e2e.9","title":"Create e2e/pages/ directory with POM base classes","description":"Create Page Object Model infrastructure:\n- Create e2e/pages/ directory\n- Create page objects: login.page.ts, weekly-grid.page.ts, app-shell.page.ts\n- Refactor existing weekly-grid.spec.ts to use POM","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T22:35:16.247069+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T22:40:57.35095+07:00","closed_at":"2026-01-20T22:40:57.35095+07:00","close_reason":"Created POM infrastructure with login.page.ts, weekly-grid.page.ts, app-shell.page.ts; refactored specs to use POMs","dependencies":[{"issue_id":"hs-e2e.9","depends_on_id":"hs-e2e","type":"parent-child","created_at":"2026-01-20T22:35:16.248049+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations","title":"Narrations - Text, Voice \u0026 Photo Capture","description":"Implement narrations system for capturing learning evidence.\n\n## Key Deliverables\n- Text narration input\n- Voice recorder (Web Audio API)\n- Photo capture (camera + upload)\n- File storage on VPS\n- Narration list view (by subject)\n\n## Acceptance Criteria\n- Text narrations save and display\n- Voice recording works in Safari/Chrome\n- Photo capture works (camera + upload)\n- Narrations grouped by subject\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":2,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:48:59.593721+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:37:48.898652+07:00","closed_at":"2026-01-20T19:37:48.898652+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations","depends_on_id":"hs-daily","type":"blocks","created_at":"2026-01-20T15:49:19.587433+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations.1","title":"Text narration input form","description":"Simple text input for narrations.\n\n## Component\n- app/components/narration/TextInput.tsx\n\n## Features\n- Textarea for text entry\n- Save to database\n- Link to subject/date\n\n## Acceptance Criteria\n- Text saves correctly\n- Displays in list","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:54:40.710477+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:22:06.252174+07:00","closed_at":"2026-01-20T19:22:06.252174+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations.1","depends_on_id":"hs-narrations","type":"parent-child","created_at":"2026-01-20T15:54:40.71169+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations.2","title":"Voice recorder with Web Audio API","description":"Record voice narrations.\n\n## Component\n- app/components/narration/VoiceRecorder.tsx\n\n## Features\n- Start/stop recording\n- Web Audio API (works in Safari/Chrome)\n- Save audio file to server\n\n## Acceptance Criteria\n- Recording works in Safari\n- Recording works in Chrome\n- Audio plays back correctly","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:54:48.533103+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:25:01.099297+07:00","closed_at":"2026-01-20T19:25:01.099297+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations.2","depends_on_id":"hs-narrations","type":"parent-child","created_at":"2026-01-20T15:54:48.534316+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations.3","title":"Photo capture (camera + upload)","description":"Capture photos for narrations.\n\n## Component\n- app/components/narration/PhotoCapture.tsx\n\n## Features\n- Camera capture on mobile\n- File upload fallback\n- Save to VPS filesystem\n\n## Acceptance Criteria\n- Camera works on mobile\n- File upload works\n- Images display correctly","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:04.80432+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:32:53.04926+07:00","closed_at":"2026-01-20T19:32:53.04926+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations.3","depends_on_id":"hs-narrations","type":"parent-child","created_at":"2026-01-20T15:55:04.8052+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations.4","title":"Narration list view (grouped by subject)","description":"Browse all narrations.\n\n## Routes\n- /narrations - all narrations by subject\n- /narrations/:subjectId - single subject\n\n## Components\n- app/components/narration/NarrationList.tsx\n- app/components/narration/NarrationCard.tsx\n\n## Acceptance Criteria\n- Grouped by subject\n- Shows type (text/voice/photo)\n- Can view individual narrations","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:07.283273+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:36:08.707513+07:00","closed_at":"2026-01-20T19:36:08.707513+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations.4","depends_on_id":"hs-narrations","type":"parent-child","created_at":"2026-01-20T15:55:07.28411+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-narrations.5","title":"File upload API endpoint","description":"Server endpoint for file uploads.\n\n## Route\n- app/routes/api.narration.tsx\n\n## Features\n- Accept voice/photo files\n- Store in /data/homeschool/uploads/\n- Return file path for database\n\n## Acceptance Criteria\n- Files upload successfully\n- Paths stored in Narration model","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:10.264521+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:26:34.338175+07:00","closed_at":"2026-01-20T19:26:34.338175+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-narrations.5","depends_on_id":"hs-narrations","type":"parent-child","created_at":"2026-01-20T15:55:10.265509+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-permissions","title":"Multi-user \u0026 Permissions System","description":"Implement user roles and permissions.\n\n## Key Deliverables\n- Parent vs Student role enforcement\n- Student sees only own data\n- Parent sees all students with switcher\n- Responsive layout (mobile/tablet duet)\n\n## Acceptance Criteria\n- Parent login sees all students\n- Student login sees only their data\n- Permission checks on all access\n- Layout switches at ≥768px\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":2,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:49:02.026105+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:37:48.901709+07:00","closed_at":"2026-01-20T19:37:48.901709+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-permissions","depends_on_id":"hs-setup.1","type":"blocks","created_at":"2026-01-20T15:49:19.895975+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-permissions.1","title":"Role-based permission checks","description":"Enforce Parent vs Student access.\n\n## Files\n- app/utils/permissions.server.ts\n\n## Rules\n- Parent: see all students, all actions\n- Student: see own data only, mark complete, add narrations\n\n## Acceptance Criteria\n- Students cannot see other students\n- Permission checks on all loaders/actions","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:23.366776+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:14:13.851231+07:00","closed_at":"2026-01-20T19:14:13.851231+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-permissions.1","depends_on_id":"hs-permissions","type":"parent-child","created_at":"2026-01-20T15:55:23.367843+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-permissions.2","title":"StudentSwitcher for parent view","description":"Parent can switch between students.\n\n## Component\n- app/components/common/StudentSwitcher.tsx\n\n## Features\n- Dropdown/tabs to switch active student\n- Only shown to Parent role\n- Persists selection in session\n\n## Acceptance Criteria\n- Parent sees switcher\n- Student does not see switcher\n- Selection persists","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:25.650722+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:19:01.28476+07:00","closed_at":"2026-01-20T19:19:01.28476+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-permissions.2","depends_on_id":"hs-permissions","type":"parent-child","created_at":"2026-01-20T15:55:25.651624+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-permissions.3","title":"AppShell with responsive navigation","description":"Main layout wrapper.\n\n## Component\n- app/components/layout/AppShell.tsx\n\n## Features\n- Bottom nav on mobile\n- Side nav on tablet\n- Student switcher (parent only)\n\n## Acceptance Criteria\n- Layout responds to breakpoints\n- Navigation works on all sizes","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:28.324374+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:26:24.448515+07:00","closed_at":"2026-01-20T18:26:24.448515+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-permissions.3","depends_on_id":"hs-permissions","type":"parent-child","created_at":"2026-01-20T15:55:28.325288+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-permissions.4","title":"TabletDuetView split layout","description":"Side-by-side view for tablet.\n\n## Component\n- app/components/layout/TabletDuetView.tsx\n\n## Features\n- Weekly grid on left\n- Daily focus on right\n- Only at ≥768px breakpoint\n\n## Acceptance Criteria\n- Split view renders at 768px+\n- Both panels functional","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:55:30.02867+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:07:54.286052+07:00","closed_at":"2026-01-20T19:07:54.286052+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-permissions.4","depends_on_id":"hs-permissions","type":"parent-child","created_at":"2026-01-20T15:55:30.029618+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup","title":"Homeschool Planner Setup","description":"Set up the Homeschool Planner app - a weekly planning tool for homeschooling families.\n\n## Overview\nReplace paper-based weekly planners with a digital tool that:\n- Tracks daily subject completion across the week (7-day grid, flexible school days)\n- Supports 'Pick 1' subject categories\n- Captures narrations (text, voice, photo) as learning evidence\n- Works on mobile and iPad (duet view at ≥768px)\n\n## Tech Stack\n- React Router v7 + React 18 + TypeScript\n- Prisma + SQLite\n- Tailwind CSS\n- Magic link auth via Mailgun\n- Kamal deployment to existing VPS (103.235.75.227)\n\n## Users\n- Parent (admin): sees all students, manages everything\n- Students (Najmi 11, Isa 8): own logins, see only their data, mark complete + add narrations\n\n## Child Tasks\n- hs-001: Project Setup - Scaffold React Router v7 App\n- hs-002: Core Weekly View - Grid \u0026 Navigation\n- hs-003: Daily Focus View - Task Cards \u0026 Progress\n- hs-004: Narrations - Text, Voice \u0026 Photo Capture\n- hs-005: Multi-user \u0026 Permissions System\n- hs-006: Deployment - Kamal to VPS\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":1,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:29:16.643097+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:37:48.904079+07:00","closed_at":"2026-01-20T19:37:48.904079+07:00","close_reason":"Closed"}
{"id":"hs-setup.1","title":"Project Setup - Scaffold React Router v7 App","description":"Scaffold React Router v7 app with TypeScript and Tailwind CSS.\n\n## Key Deliverables\n- React Router v7 app structure\n- Prisma + SQLite configured\n- Magic link auth setup\n- Seed data with real curriculum\n\n## Acceptance Criteria\n- npm install succeeds\n- npm run dev starts server\n- Prisma schema matches data model\n- Seed data creates subjects for Najmi and Isa\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":1,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:45:17.152198+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:14:53.132216+07:00","closed_at":"2026-01-20T18:14:53.132216+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-setup.1","depends_on_id":"hs-setup","type":"parent-child","created_at":"2026-01-20T15:45:17.154362+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup.1.1","title":"Initialize React Router v7 app with TypeScript","description":"Scaffold the base React Router v7 app.\n\n## Files to Create\n- package.json with react-router v7 dependencies\n- react-router.config.ts\n- vite.config.ts with @react-router/dev/vite\n- tsconfig.json\n- app/routes.ts\n- app/entry.client.tsx\n- app/entry.server.tsx\n- app/root.tsx\n\n## Acceptance Criteria\n- npm install succeeds\n- npm run dev starts server\n- Basic route renders","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:50:36.371023+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T17:40:19.498078+07:00","closed_at":"2026-01-20T17:40:19.498078+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-setup.1.1","depends_on_id":"hs-setup.1","type":"parent-child","created_at":"2026-01-20T15:50:36.37264+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup.1.2","title":"Configure Tailwind CSS with design tokens","description":"Set up Tailwind with the design system colors.\n\n## Files to Create\n- tailwind.config.ts\n- app/styles/tailwind.css\n- postcss.config.js\n\n## Design Tokens\n- lavender: #E8E4F0 (background)\n- coral: #F08080 (primary accent)\n- white: #FFFFFF (cards)\n\n## Acceptance Criteria\n- Tailwind classes work in components\n- Design tokens available","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:50:40.479044+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T17:43:06.08139+07:00","closed_at":"2026-01-20T17:43:06.08139+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-setup.1.2","depends_on_id":"hs-setup.1","type":"parent-child","created_at":"2026-01-20T15:50:40.480449+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup.1.3","title":"Set up Prisma with SQLite schema","description":"Configure Prisma ORM with the full data model.\n\n## Files to Create\n- prisma/schema.prisma (full schema from plan)\n- app/utils/db.server.ts\n\n## Models\n- User, Student, Subject, SubjectOption\n- StudentSubject, WeeklySchedule, ScheduleEntry\n- Narration\n\n## Acceptance Criteria\n- npx prisma generate succeeds\n- npx prisma db push creates database\n- db.server.ts exports prisma client","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:50:42.791388+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T17:59:15.010046+07:00","closed_at":"2026-01-20T17:59:15.010046+07:00","close_reason":"Completed: Prisma 7 with SQLite configured successfully","dependencies":[{"issue_id":"hs-setup.1.3","depends_on_id":"hs-setup.1","type":"parent-child","created_at":"2026-01-20T15:50:42.792389+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup.1.4","title":"Set up auth utilities (session \u0026 magic link)","description":"Create authentication infrastructure.\n\n## Files to Create\n- app/utils/session.server.ts (cookie session)\n- app/utils/auth.server.ts (magic link logic)\n- app/routes/login.tsx\n- app/routes/magic.tsx\n- app/routes/logout.tsx\n\n## Features\n- Cookie-based session\n- Magic link generation\n- Magic link verification\n- Logout clears session\n\n## Acceptance Criteria\n- Session persists across requests\n- Magic link flow works (without email for now)","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:50:45.342754+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:11:50.931304+07:00","closed_at":"2026-01-20T18:11:50.931304+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-setup.1.4","depends_on_id":"hs-setup.1","type":"parent-child","created_at":"2026-01-20T15:50:45.343583+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-setup.1.5","title":"Create seed data with real curriculum","description":"Seed database with Najmi and Isa's curriculum.\n\n## Files to Create\n- prisma/seed.ts\n\n## Data to Seed\n- Parent user (Zain)\n- Students: Najmi (11), Isa (8)\n- Subjects per student with correct types:\n  - FIXED: Math, Handwriting, etc.\n  - SCHEDULED: Coding (Mon-Thu), etc.\n  - PICK1: Islamic Study with options\n\n## Acceptance Criteria\n- npx prisma db seed populates data\n- Both students have their subjects\n- Pick1 subjects have options","status":"closed","priority":1,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:50:48.116711+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:14:45.846647+07:00","closed_at":"2026-01-20T18:14:45.846647+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-setup.1.5","depends_on_id":"hs-setup.1","type":"parent-child","created_at":"2026-01-20T15:50:48.117693+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly","title":"Core Weekly View - Grid \u0026 Navigation","description":"Implement the weekly overview with 7-day grid and navigation.\n\n## Key Deliverables\n- WeeklyGrid component (7 days, off-days grayed)\n- Subject rows with completion checkboxes\n- Pick1 selector\n- Week navigation (prev/next, any past week)\n- School days configuration per week\n\n## Acceptance Criteria\n- Grid shows 7 days with off-days grayed\n- Can navigate to any past week\n- Checkboxes toggle completion status\n- Pick1 selector works and can change anytime\n\n## Plan Document\nSee: ~/.claude/plans/fancy-coalescing-trinket.md","status":"closed","priority":2,"issue_type":"epic","owner":"me@zainf.dev","created_at":"2026-01-20T15:48:53.923641+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:03:15.608072+07:00","closed_at":"2026-01-20T19:03:15.608072+07:00","close_reason":"All child tasks completed","dependencies":[{"issue_id":"hs-weekly","depends_on_id":"hs-setup.1","type":"blocks","created_at":"2026-01-20T15:49:18.829845+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly.1","title":"WeeklyGrid component with 7-day layout","description":"Core grid showing all 7 days.\n\n## Component\n- app/components/schedule/WeeklyGrid.tsx\n\n## Features\n- 7 columns for Mon-Sun\n- Off-days (non-school days) grayed out\n- Responsive: stacks on mobile\n\n## Acceptance Criteria\n- Grid renders 7 days\n- Off-days visually distinct","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:51:08.751707+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:16:29.787879+07:00","closed_at":"2026-01-20T18:16:29.787879+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-weekly.1","depends_on_id":"hs-weekly","type":"parent-child","created_at":"2026-01-20T15:51:08.752724+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly.2","title":"SubjectRow with completion checkboxes","description":"Row component for each subject.\n\n## Component\n- app/components/schedule/SubjectRow.tsx\n- app/components/schedule/DayColumn.tsx\n\n## Features\n- Subject name and icon\n- Checkbox per day\n- Toggle completion status\n- Works for past days too\n\n## Acceptance Criteria\n- Checkboxes toggle correctly\n- State persists to database","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:51:10.892888+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:19:26.537738+07:00","closed_at":"2026-01-20T18:19:26.537738+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-weekly.2","depends_on_id":"hs-weekly","type":"parent-child","created_at":"2026-01-20T15:51:10.893722+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly.3","title":"Pick1Selector for pick-one subjects","description":"Selector for PICK1 subject type.\n\n## Component\n- app/components/schedule/Pick1Selector.tsx\n\n## Features\n- Shows available options\n- Can change selection anytime\n- Selection persists\n\n## Acceptance Criteria\n- Options display correctly\n- Selection can change\n- Persists across page loads","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:51:14.321353+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:22:02.560547+07:00","closed_at":"2026-01-20T18:22:02.560547+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-weekly.3","depends_on_id":"hs-weekly","type":"parent-child","created_at":"2026-01-20T15:51:14.322378+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly.4","title":"Week navigation (prev/next/jump)","description":"Navigate between weeks.\n\n## Routes\n- /week - current week (redirect)\n- /week/:weekStart - specific week\n\n## Features\n- Prev/Next week buttons\n- Can browse any past week\n- Week start = Monday\n\n## Acceptance Criteria\n- Navigation works\n- URL reflects selected week\n- Can view past weeks","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:51:16.175219+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T18:24:22.150958+07:00","closed_at":"2026-01-20T18:24:22.150958+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-weekly.4","depends_on_id":"hs-weekly","type":"parent-child","created_at":"2026-01-20T15:51:16.176137+07:00","created_by":"Zain Fathoni"}]}
{"id":"hs-weekly.5","title":"School days configuration per week","description":"Configure which days are school days.\n\n## Route\n- /week/:weekStart/settings\n\n## Features\n- Toggle any of 7 days as school day\n- Flexible: any 5 of 7 (or fewer)\n- Saves to WeeklySchedule.schoolDays\n\n## Acceptance Criteria\n- Can mark any day as school/off\n- Grid reflects school day config","status":"closed","priority":2,"issue_type":"task","owner":"me@zainf.dev","created_at":"2026-01-20T15:51:18.460984+07:00","created_by":"Zain Fathoni","updated_at":"2026-01-20T19:02:09.117758+07:00","closed_at":"2026-01-20T19:02:09.117758+07:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-weekly.5","depends_on_id":"hs-weekly","type":"parent-child","created_at":"2026-01-20T15:51:18.4618+07:00","created_by":"Zain Fathoni"}]}
